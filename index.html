<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plato Session Manager</title>
    <style>
        body {
            background-color: #0d1117;
            color: #c9d1d9;
            font-family: monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        .container {
            width: 100%;
            max-width: 600px;
            background: #161b22;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #30363d;
        }
        h2 { text-align: center; color: #58a6ff; }
        
        .step {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #30363d;
            border-radius: 8px;
            background: #21262d;
        }
        .step h3 { margin-top: 0; font-size: 16px; color: #79c0ff; }
        
        button {
            width: 100%;
            padding: 12px;
            background-color: #238636;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            margin-top: 10px;
            font-weight: bold;
        }
        button:hover { background-color: #2ea043; }
        
        #console-log {
            background: #000;
            color: #0f0;
            padding: 15px;
            margin-top: 20px;
            border-radius: 5px;
            min-height: 150px;
            white-space: pre-wrap;
            font-size: 12px;
            border: 1px solid #333;
        }
    </style>
</head>
<body>

    <div class="container">
        <h2>Plato Auto-Cookie Sequence</h2>
        
        <!-- STEP 1: INITIALIZE -->
        <div class="step">
            <h3>Step 1: Initialize Session (Cookie Maker)</h3>
            <p style="font-size: 12px; color: #8b949e;">Ye request '/a?d=...' url ko hit karegi taaki browser cookies save kar le.</p>
            <button onclick="step1_Initialize()">1. Run Initialization</button>
        </div>

        <!-- STEP 2: VALIDATE -->
        <div class="step">
            <h3>Step 2: Validate Session (PUT Data)</h3>
            <p style="font-size: 12px; color: #8b949e;">Ye wo 'Step' API hai jo JSON data bhej kar session confirm karti hai.</p>
            <button onclick="step2_Validate()">2. Send Validation Data</button>
        </div>

        <!-- STEP 3: STATUS -->
        <div class="step">
            <h3>Step 3: Check Status</h3>
            <p style="font-size: 12px; color: #8b949e;">Finally, ye check karega ke session active hai ya nahi.</p>
            <button onclick="step3_CheckStatus()">3. Get Status</button>
        </div>

        <div id="console-log">Logs will appear here...</div>
    </div>

    <script>
        const logBox = document.getElementById('console-log');
        
        function log(msg) {
            logBox.innerText += "\n> " + msg;
            logBox.scrollTop = logBox.scrollHeight;
        }

        // Common Headers (Browser managed headers removed)
        function getHeaders(isJson = false) {
            const h = new Headers();
            h.append('Accept', isJson ? 'application/json' : 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8');
            h.append('x-client-name', 'platoboost webclient');
            h.append('x-client-version', '5.3.2');
            h.append('accept-language', 'en-US,en;q=0.9');
            if(isJson) h.append('Content-Type', 'application/json');
            return h;
        }

        // --- STEP 1: Initialization (/a?d=...) ---
        function step1_Initialize() {
            log("Running Step 1: Initializing...");
            
            const url = 'https://auth.platorelay.com/a?d=7Us7D7i5a9O22oJXNZDdvZj6McbQMUgoPNj9vndasGDRep0srHcBVuxxDnZglFIFRPw4jhoa2hFMNkVqxRyjJSxrowXISCPV6ueCXCSY7wtJxy9WUnjvnAWIB786AQpfqrDaZCItWyh3ZtSjLexzmTXx3z561HkczW2qdvtajhHKoQmQmTLk6wQTc36i6nTww7Fo2ZDIWNhbxHb92M4cB1Ne0TiXzYKy3X9pUMRAC2QZF28f8zeXnR6N7WBqd44m3DcZGt6iDWsXaLRkYU8zOZfhnT4jb2yyIBpdmBJ1eTcXwHhGNygguHnG1iOdnP7VoKODVlbPV2TtxGnOE2Jie2IdKOzYcDcE9HETvfebL5jeBv7pBN9VSKrJst0k0sixibRljGFb1q5ZQIH3l51jOR9zDFluhVaspHroyo8GZ39xevIbRTjHkO8YAvoYR75I0I2c0x15YMCcCpfB1GHq';
            
            fetch(url, {
                method: 'GET',
                headers: getHeaders(false),
                credentials: 'include' // IMPORTAMT: Saves cookies
            })
            .then(response => {
                log("Step 1 Response Status: " + response.status);
                return response.text();
            })
            .then(result => {
                log("Step 1 Success! Cookies should be saved.");
            })
            .catch(error => log("Step 1 Error: " + error));
        }

        // --- STEP 2: Validation (PUT /api/session/step) ---
        function step2_Validate() {
            log("Running Step 2: Validating...");

            const url = 'https://auth.platorelay.com/api/session/step?ticket=7Us7D7i5a9O22oJXNZDdvZj6McbQMUgoPNj9vndasGDRep0srHcBVuxxDnZglFIFRPw4jhoa2hFMNkVqxRyjJSxrowXISCPV6ueCXCSY7wtJxy9WUnjvnAWIB786AQpfqrDaZCItWyh3ZtSjLexzmTXx3z561HkczW2qdvtajhHKoQmQmTLk6wQTc36i6nTww7Fo2ZDIWNhbxHb92M4cB1Ne0TiXzYKy3X9pUMRAC2QZF28f8zeXnR6N7WBqd44m3DcZGt6iDWsXaLRkYU8zOZfhnT4jb2yyIBpdmBJ1eTcXwHhGNygguHnG1iOdnP7VoKODVlbPV2TtxGnOE2Jie2IdKOzYcDcE9HETvfebL5jeBv7pBN9VSKrJst0k0sixibRljGFb1q5ZQIH3l51jOR9zDFluhVaspHroyo8GZ39xevIbRTjHkO8YAvoYR75I0I2c0x15YMCcCpfB1GHq&service=2';

            // Data from your logs
            const data = JSON.stringify({
                "captcha": null,
                "meta": "49080eaf479094074f9aef00135c724d774d00f2aeb7dd05bf6e1507bf2c8777d5bd4f2e817e324382ef71c9063d68d9dcaad9f48c98179b6db8553aa273be201b5cd2cd6e3a11ccf6b46a1de57ef91f3472c46c427351e78c56ba5b2ce9eb0b7319e91f5e3c8a8d189106337564468e2d7989dd250f6f738f536e4a72c1f6aa70a90a96da5d095601017e8bc7e97b1501d6b47fdbec739462bf938dc1443af6597570a677d9430d8aeadc353cbf526d61ea1433dc75aa683e8d99121e54320774e24c89952bea664ff9352e7d96fe6bd89f95b534d424ea5edea614145b2779844d16329d9143103a6044b3f1da49c2eee1f980449cfa20058685f821f55a98fc1007dac7f03aa3a4424550b25e8ed45c7431c13e217c067a4e8c12906f3fdc426cfb68f049568caa290a6b893a83cb2b51491b7aa7b48119cbc2d09caed2c1c918facca14346601039dabbae1c68313893e759467b6b7199bd83f61f5f491bafd56f79a940d47d04e1ce50c45c7ec0e91f3b341304fe0925204619c4b77504d03c6fa37412b74ce654ec417b2cfe6185ce97cfe6bb086ef2d4315af09acab36337e5ac61fc450942b057bf7244be2647701540c0b9019d33e3e556978e0c648f54100462a545418ff18d4b8c814527bf482f586f79fe2ca447aa4d18fd9c32b9bcdbda710609b3576e4b4076713972cfcdc25d186b57240ec61f6e8841a5a6bd7da343959631cd8010bdcac1ec6a8a48a2cb3a8b8f2e6f97c0f32a60e30cf219b40d807afb10e01fa3ef5ea44d61c774ef4d98f9de1a159794dcc1d191e975bdb54ceab325622ea147191d1a5209899862bee649f190bae8d9b979751c060143880d2dda779801cdba5c6e82d56b44dbf6074e03c333ad4a6c1584f3ace235de2adc3be1a7d2422987b22641e879aa29722ce77e45831038f5074646b63ca8e211",
                "stream": "183cf7f7c7e4985a48c81cd5b05a3fb72cea4cdf730a6075097dbce210bac5c328e8ccb80c15e57d40c371e6167f6ac3fb38efd4ad37734c6260f34f26b7703011",
                "resolved": true
            });

            fetch(url, {
                method: 'PUT',
                headers: getHeaders(true),
                body: data,
                credentials: 'include' // IMPORTANT: Sends cookies created in Step 1
            })
            .then(response => response.text())
            .then(result => {
                log("Step 2 Result: " + result);
            })
            .catch(error => log("Step 2 Error: " + error));
        }

        // --- STEP 3: Check Status ---
        function step3_CheckStatus() {
            log("Running Step 3: Checking Status...");

            const url = 'https://auth.platorelay.com/api/session/status?ticket=7Us7D7i5a9O22oJXNZDdvZj6McbQMUgoPNj9vndasGDRep0srHcBVuxxDnZglFIFRPw4jhoa2hFMNkVqxRyjJSxrowXISCPV6ueCXCSY7wtJxy9WUnjvnAWIB786AQpfqrDaZCItWyh3ZtSjLexzmTXx3z561HkczW2qdvtajhHKoQmQmTLk6wQTc36i6nTww7Fo2ZDIWNhbxHb92M4cB1Ne0TiXzYKy3X9pUMRAC2QZF28f8zeXnR6N7WBqd44m3DcZGt6iDWsXaLRkYU8zOZfhnT4jb2yyIBpdmBJ1eTcXwHhGNygguHnG1iOdnP7VoKODVlbPV2TtxGnOE2Jie2IdKOzYcDcE9HETvfebL5jeBv7pBN9VSKrJst0k0sixibRljGFb1q5ZQIH3l51jOR9zDFluhVaspHroyo8GZ39xevIbRTjHkO8YAvoYR75I0I2c0x15YMCcCpfB1GHq';

            fetch(url, {
                method: 'GET',
                headers: getHeaders(false),
                credentials: 'include' // IMPORTANT: Sends valid session cookies
            })
            .then(response => response.text())
            .then(result => {
                log("Step 3 FINAL RESULT:\n" + result);
            })
            .catch(error => log("Step 3 Error: " + error));
        }
    </script>

</body>
</html>

